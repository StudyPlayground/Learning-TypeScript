## 폴리필이란?

polyfill : 충전솜

polyfill은 기본적으로 지원하지 않는 이전 브라우저에서 최신 기능을 제공하는 데 필요한 코드 (일반적으로 웹의 JavaScript)입니다.

자바스크립트는 끊임없이 진화하는 언어이다. 새로운 제안이 정기적으로 등록, 분석되고, 가치가 있다고 판단되는 제안은 https://tc39.es/ecma262/에 추가된다. ㅡ리고 궁극적으로 명세서에 등록된다.

자바스크립트 엔진을 만드는 각 조직은 우선순위를 매겨 명세서 내 어떤 기능을 구현할 지 결정한다.

따라서 엔진이 표준 전체를 지원하지 않고 일부만 지원하는 것은 흔한 일이다. (각 브라우저마다 지원이 다름)

## 바벨

명세서에 등록된지 얼마 안된 기능을 사용해 코드를 작성하다 보면 특정 엔진에서 그 기능을 지원하지 않는 것을 종종 경험한다. 이때 바벨을 사용할 수 있다.

바벨은 트렌스파일러로, 모던 자바스크립트 코드를 구 표준 코드로 바꾼다.

바벨의 주요 역할은 다음과 같다.

1. 트렌스파일러 - 바벨은 코드를 재작성해주는 트랜스파일러 프로그램이다. 바벨은 개발자의 컴퓨터에서 돌아 가는데, 이를 실행하면 기존 코드가 구 표준을 준수하는 코드로 변경된다. 웹팩과 같은 모던 프로젝트 빌드 시스템은 코드가 수정될 때 마다 자동으로 트렌스파일러를 동작시킨다. 
2. 폴리필
    
    새로운 문법을 사용해 코드를 작성하면 트랜스파일러는 이를 구 표준을 준수하는 코드로 변경해준다. 반면 새롭게 표준에 추가된 함수는 명세서 내 정의를 읽고 이에 맞게 직접 함수를 구현해야 사용할 수 있다. 
    
    이렇게 변경된 표준을 준수할 수 있게 기존 함수의 동작 방식을 수정하거나, 새롭게 구현한 함수의 스크립트를 polyfill이라고 한다.
    

ES5 이하를 지원하는 브라우저에서 Promise나 Set, Array.prototype.includes 를 읽어낼 수 없다. 

바벨은 최신 es6문법을 es5로 바꾸어주는 것이고 polyfill은 브라우저가 이해할 수 없는 코드에 대해 이해할 수 있는 소스코드를 제공한다.

### 무엇을 컴파일하고, 폴리필하는가?

다음의 경우 컴파일될 수 없고, 폴리필이 필요하다.

- ES5의 globall namespace(window)에 존재하지 않는 것은 컴파일하지 못한다.
    - 새로운 객체(Promise, IntersectionObserver, Set, Map …)
    - 기존 객체의 새로운 메서드(Array.prototype.includes,,, )
    - 새로운 함수

전역 객체에 존재하지 않는 객체, 메서드, 함수는 바벨이 컴파일해줄 수 없고 폴리필이 필요하다.

반면 새로운 문법인 경우에는 가능하다.

[Polyfill - MDN Web Docs 용어 사전: 웹 용어 정의 | MDN](https://developer.mozilla.org/ko/docs/Glossary/Polyfill)

[폴리필](https://ko.javascript.info/polyfills)

[컴파일과 폴리필의 차이점 분석 (babel, polyfill)](https://happysisyphe.tistory.com/m/49)

[GitHub - zloirock/core-js: Standard Library](https://github.com/zloirock/core-js#features)
